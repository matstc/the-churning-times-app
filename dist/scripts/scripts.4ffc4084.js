"use strict";angular.module("theChurningTimesApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{title:"The Churning Times",templateUrl:"views/main.html",controller:"MainCtrl"}).when("/about",{title:"About",templateUrl:"views/about.html",controller:"AboutCtrl"}).when("/article/:id",{templateUrl:"views/article.html",controller:"ArticleCtrl"}).otherwise({redirectTo:"/"})}]).run(["$location","$rootScope",function(a,b){b.$on("$routeChangeSuccess",function(a,c){c.$$route.title&&(b.title=c.$$route.title)})}]),angular.module("theChurningTimesApp").factory("ArticleService",["$http",function(a){var b={};return b.fetchRecent=function(){return a({method:"GET",url:"http://api.thechurningtimes.com/articles/recent.json"})},b.fetch=function(b){return a({method:"GET",url:"http://api.thechurningtimes.com/articles/"+b+".json"})},b.create=function(b){return b._method="PUT",a({method:"POST",url:"http://api.thechurningtimes.com/articles.json",data:b})},b}]),angular.module("theChurningTimesApp").controller("MainCtrl",["$scope","ArticleService",function(a,b){a.headline="",a.lead="",a.author="",a.submit=function(){console.log("Submitting "+a.headline),b.create({article:{headline:a.headline,author:a.author,lead:a.lead}}).success(function(a){location.href="#/article/"+a.id})}}]),angular.module("theChurningTimesApp").controller("HeaderCtrl",["$scope",function(a){a.date=new Date}]),angular.module("theChurningTimesApp").controller("ListingCtrl",["$scope","ArticleService",function(a,b){a.articles=[],b.fetchRecent().success(function(b){a.articles=b})}]),angular.module("theChurningTimesApp").controller("ArticleCtrl",["$rootScope","$scope","$routeParams","$timeout","ArticleService",function(a,b,c,d,e){d(function(){twttr.widgets.load()}),e.fetch(c.id).success(function(c){b.article=c,a.title=b.article.headline});var f=function(){return location.href.replace("#","%23")};b.shareOnTwitter=function(){open("https://twitter.com/share?text="+b.article.headline+"&via=churningtimes&url="+f())},b.shareOnFacebook=function(){open("https://www.facebook.com/dialog/share?app_id=741440062566027&display=popup&href="+f()+"&redirect_uri="+f())}}]),angular.module("theChurningTimesApp").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]);